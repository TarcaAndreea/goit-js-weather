{"mappings":"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","sources":["src/js/search.js"],"sourcesContent":["const form = document.querySelector('.js-form');\nconst input = document.getElementsByName('query')[0];\nconst favoritesList = document.querySelector('.js-slider-list');\nconst addButton = document.querySelector('#js-btnAdd');\nconst prevButton = document.querySelector('.prev');\nconst nextButton = document.querySelector('.next');\n\nlet shownFavorites = [];\ngetInitialShownFavorites();\nsetFavoritesList();\n\nfunction shoulShowNavigation() {\n  const favorites = JSON.parse(localStorage.getItem('cities'));\n\n  return favorites !== null && favorites.length > 4;\n}\n\nform.addEventListener('submit', event => {\n  event.preventDefault();\n  const city = input.value;\n  alert(`add api call here for ${city}`);\n});\n\naddButton.addEventListener('click', () => {\n  const value = input.value;\n  addValueToLocalStorage(value);\n  if (shownFavorites.length < 4) {\n    shownFavorites.push(value);\n  }\n  setFavoritesList();\n});\n\nprevButton.addEventListener('click', () => {\n  const favorites = JSON.parse(localStorage.getItem('cities'));\n  const firstShown = shownFavorites[0];\n  const indexOfFirstShown = favorites.indexOf(firstShown);\n  if (indexOfFirstShown > 0) {\n    shownFavorites = shownFavorites.filter(\n      favorite => favorite !== shownFavorites[3]\n    );\n    shownFavorites.unshift(favorites[indexOfFirstShown - 1]);\n  }\n  setFavoritesList();\n});\n\nnextButton.addEventListener('click', () => {\n  const favorites = JSON.parse(localStorage.getItem('cities'));\n  const lastShown = shownFavorites[shownFavorites.length - 1];\n  const indexOfLastShown = favorites.indexOf(lastShown);\n  if (indexOfLastShown < favorites.length - 1) {\n    shownFavorites = shownFavorites.filter(\n      favorite => favorite !== shownFavorites[0]\n    );\n    shownFavorites.push(favorites[indexOfLastShown + 1]);\n  }\n  setFavoritesList();\n});\n\nfunction setNavigationVisibility() {\n  const favorites = JSON.parse(localStorage.getItem('cities'));\n  if (favorites == null || favorites.length <= 4) {\n    prevButton.style.visibility = 'hidden';\n    nextButton.style.visibility = 'hidden';\n  } else {\n    prevButton.style.visibility = 'visible';\n    nextButton.style.visibility = 'visible';\n  }\n}\n\nfunction getInitialShownFavorites() {\n  const favorites = JSON.parse(localStorage.getItem('cities'));\n\n  if (favorites == null) {\n    return;\n  }\n\n  if (favorites.length < 4) {\n    for (let index = 0; index < favorites.length; index++) {\n      shownFavorites.push(favorites[index]);\n    }\n  } else {\n    for (let index = 0; index < 4; index++) {\n      shownFavorites.push(favorites[index]);\n    }\n  }\n}\n\nfunction setFavoritesList() {\n  favoritesList.innerHTML = '';\n  for (let index = 0; index < shownFavorites.length; index++) {\n    const favorite = shownFavorites[index];\n\n    const li = document.createElement('li');\n    li.style = 'display:flex;';\n\n    const city = document.createElement('button');\n    city.value = favorite;\n    city.innerHTML = favorite;\n    city.addEventListener('click', handleSelectFavorite);\n    const button = document.createElement('button');\n    button.value = favorite;\n    button.addEventListener('click', handleDeleteEvent);\n\n    button.innerHTML = 'x';\n    li.appendChild(city);\n    li.appendChild(button);\n    favoritesList.appendChild(li);\n  }\n\n  setNavigationVisibility();\n}\n\nfunction handleSelectFavorite(event) {\n  const value = event.target.value;\n  //todo: add api call here\n  //alert(`Add api call here for ${value}`);\n}\n\nfunction handleDeleteEvent(event) {\n  const value = event.target.value;\n  let cities = JSON.parse(localStorage.getItem('cities'));\n  deleteValueFromShownFavorites(cities, value);\n  deleteValueFromLocalStorage(cities, value);\n  setFavoritesList();\n}\n\nfunction deleteValueFromLocalStorage(cities, value) {\n  cities = cities.filter(city => city !== value);\n  localStorage.setItem('cities', JSON.stringify(cities));\n}\n\nfunction deleteValueFromShownFavorites(favorites, value) {\n  if (favorites.length <= 4) {\n    shownFavorites = shownFavorites.filter(f => f !== value);\n    return;\n  }\n\n  const lastShown = shownFavorites[shownFavorites.length - 1];\n  const indexOfLastShown = favorites.indexOf(lastShown);\n  if (indexOfLastShown < favorites.length - 1) {\n    shownFavorites = shownFavorites.filter(f => f !== value);\n    shownFavorites.push(favorites[indexOfLastShown + 1]);\n  } else {\n    shownFavorites = shownFavorites.filter(f => f !== value);\n  }\n}\n\nfunction addValueToLocalStorage(value) {\n  if (value === '') {\n    return;\n  }\n  const cities = localStorage.getItem('cities');\n\n  if (cities === null) {\n    localStorage.setItem('cities', JSON.stringify([value]));\n  } else {\n    let citiesArray = JSON.parse(cities).map(city => city.toLowerCase());\n    if (!citiesArray.includes(value.toLowerCase())) {\n      citiesArray.push(value);\n      localStorage.setItem('cities', JSON.stringify(citiesArray));\n    }\n  }\n}\n"],"names":["$d35904b1c7f1c41e$var$form","document","querySelector","$d35904b1c7f1c41e$var$input","getElementsByName","$d35904b1c7f1c41e$var$favoritesList","$d35904b1c7f1c41e$var$addButton","$d35904b1c7f1c41e$var$prevButton","$d35904b1c7f1c41e$var$nextButton","$d35904b1c7f1c41e$var$shownFavorites","$d35904b1c7f1c41e$var$setFavoritesList","innerHTML","index","length","favorite","li","createElement","style","city","value","addEventListener","$d35904b1c7f1c41e$var$handleSelectFavorite","button","$d35904b1c7f1c41e$var$handleDeleteEvent","appendChild","favorites","JSON","parse","localStorage","getItem","visibility","event","target","cities","filter","f","lastShown","indexOfLastShown","indexOf","push","$d35904b1c7f1c41e$var$deleteValueFromShownFavorites","setItem","stringify","$d35904b1c7f1c41e$var$deleteValueFromLocalStorage","index1","$d35904b1c7f1c41e$var$getInitialShownFavorites","preventDefault","alert","concat","citiesArray","map","toLowerCase","includes","$d35904b1c7f1c41e$var$addValueToLocalStorage","firstShown","indexOfFirstShown","unshift"],"version":3,"file":"index.54e11b6f.js.map"}