{"mappings":"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","sources":["src/js/search.js"],"sourcesContent":["const form = document.querySelector('.js-form');\nconst input = document.getElementsByName('query')[0];\nconst favoritesList = document.querySelector('.js-slider-list');\nconst addButton = document.querySelector('#js-btnAdd');\nconst prevButton = document.querySelector('.prev');\nconst nextButton = document.querySelector('.next');\n\nlet shownFavorites = [];\ngetInitialShownFavorites();\nsetFavoritesList();\n\nfunction shoulShowNavigation() {\n  const favorites = JSON.parse(localStorage.getItem('cities'));\n\n  return favorites !== null && favorites.length > 4;\n}\n\nform.addEventListener('submit', event => {\n  event.preventDefault();\n  const city = input.value;\n  alert(`add api call here for ${city}`);\n});\n\naddButton.addEventListener('click', () => {\n  const value = input.value;\n  addValueToLocalStorage(value);\n  if (shownFavorites.length < 4) {\n    shownFavorites.push(value);\n  }\n  setFavoritesList();\n});\n\nprevButton.addEventListener('click', () => {\n  const favorites = JSON.parse(localStorage.getItem('cities'));\n  const firstShown = shownFavorites[0];\n  const indexOfFirstShown = favorites.indexOf(firstShown);\n  if (indexOfFirstShown > 0) {\n    shownFavorites = shownFavorites.filter(\n      favorite => favorite !== shownFavorites[3]\n    );\n    shownFavorites.unshift(favorites[indexOfFirstShown - 1]);\n  }\n  setFavoritesList();\n});\n\nnextButton.addEventListener('click', () => {\n  const favorites = JSON.parse(localStorage.getItem('cities'));\n  const lastShown = shownFavorites[shownFavorites.length - 1];\n  const indexOfLastShown = favorites.indexOf(lastShown);\n  if (indexOfLastShown < favorites.length - 1) {\n    shownFavorites = shownFavorites.filter(\n      favorite => favorite !== shownFavorites[0]\n    );\n    shownFavorites.push(favorites[indexOfLastShown + 1]);\n  }\n  setFavoritesList();\n});\n\nfunction setNavigationVisibility() {\n  const favorites = JSON.parse(localStorage.getItem('cities'));\n  if (favorites == null || favorites.length <= 4) {\n    prevButton.style.visibility = 'hidden';\n    nextButton.style.visibility = 'hidden';\n  } else {\n    prevButton.style.visibility = 'visible';\n    nextButton.style.visibility = 'visible';\n  }\n}\n\nfunction getInitialShownFavorites() {\n  const favorites = JSON.parse(localStorage.getItem('cities'));\n\n  if (favorites == null) {\n    return;\n  }\n\n  if (favorites.length < 4) {\n    for (let index = 0; index < favorites.length; index++) {\n      shownFavorites.push(favorites[index]);\n    }\n  } else {\n    for (let index = 0; index < 4; index++) {\n      shownFavorites.push(favorites[index]);\n    }\n  }\n}\n\nfunction setFavoritesList() {\n  favoritesList.innerHTML = '';\n  for (let index = 0; index < shownFavorites.length; index++) {\n    const favorite = shownFavorites[index];\n\n    const li = document.createElement('li');\n    li.style = 'display:flex;';\n\n    const city = document.createElement('button');\n    city.value = favorite;\n    city.innerHTML = favorite;\n    city.addEventListener('click', handleSelectFavorite);\n    const button = document.createElement('button');\n    button.value = favorite;\n    button.addEventListener('click', handleDeleteEvent);\n\n    button.innerHTML = 'x';\n    li.appendChild(city);\n    li.appendChild(button);\n    favoritesList.appendChild(li);\n  }\n\n  setNavigationVisibility();\n}\n\nfunction handleSelectFavorite(event) {\n  const value = event.target.value;\n  //todo: add api call here\n  //alert(`Add api call here for ${value}`);\n}\n\nfunction handleDeleteEvent(event) {\n  const value = event.target.value;\n  let cities = JSON.parse(localStorage.getItem('cities'));\n  deleteValueFromShownFavorites(cities, value);\n  deleteValueFromLocalStorage(cities, value);\n  setFavoritesList();\n}\n\nfunction deleteValueFromLocalStorage(cities, value) {\n  cities = cities.filter(city => city !== value);\n  localStorage.setItem('cities', JSON.stringify(cities));\n}\n\nfunction deleteValueFromShownFavorites(favorites, value) {\n  if (favorites.length <= 4) {\n    shownFavorites = shownFavorites.filter(f => f !== value);\n    return;\n  }\n\n  const lastShown = shownFavorites[shownFavorites.length - 1];\n  const indexOfLastShown = favorites.indexOf(lastShown);\n  if (indexOfLastShown < favorites.length - 1) {\n    shownFavorites = shownFavorites.filter(f => f !== value);\n    shownFavorites.push(favorites[indexOfLastShown + 1]);\n  } else {\n    shownFavorites = shownFavorites.filter(f => f !== value);\n  }\n}\n\nfunction addValueToLocalStorage(value) {\n  if (value === '') {\n    return;\n  }\n  const cities = localStorage.getItem('cities');\n\n  if (cities === null) {\n    localStorage.setItem('cities', JSON.stringify([value]));\n  } else {\n    let citiesArray = JSON.parse(cities).map(city => city.toLowerCase());\n    if (!citiesArray.includes(value.toLowerCase())) {\n      citiesArray.push(value);\n      localStorage.setItem('cities', JSON.stringify(citiesArray));\n    }\n  }\n}\n"],"names":["$b18fd23e9761f35d$var$form","document","querySelector","$b18fd23e9761f35d$var$input","getElementsByName","$b18fd23e9761f35d$var$favoritesList","$b18fd23e9761f35d$var$addButton","$b18fd23e9761f35d$var$prevButton","$b18fd23e9761f35d$var$nextButton","$b18fd23e9761f35d$var$shownFavorites","$b18fd23e9761f35d$var$setFavoritesList","innerHTML","index","length","favorite","li","createElement","style","city","value","addEventListener","$b18fd23e9761f35d$var$handleSelectFavorite","button","$b18fd23e9761f35d$var$handleDeleteEvent","appendChild","favorites","JSON","parse","localStorage","getItem","visibility","$b18fd23e9761f35d$var$setNavigationVisibility","event","target","cities","filter","f","lastShown","indexOfLastShown","indexOf","push","$b18fd23e9761f35d$var$deleteValueFromShownFavorites","setItem","stringify","$b18fd23e9761f35d$var$deleteValueFromLocalStorage","index1","$b18fd23e9761f35d$var$getInitialShownFavorites","preventDefault","alert","citiesArray","map","toLowerCase","includes","$b18fd23e9761f35d$var$addValueToLocalStorage","firstShown","indexOfFirstShown","unshift"],"version":3,"file":"index.f958dbc1.js.map"}